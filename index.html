<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>AI EduBrain Demo</title>

  <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="/assets/app.css" />
  <meta name="theme-color" content="#4f46e5" />

  <script defer src="/assets/app.js?v=091"></script>
</head>

<body>
  <!-- ===== Sidebar ===== -->
  <aside class="sidebar">
    <div class="logo-area">
      <img class="logo-icon" src="/assets/digital-human.svg" alt="EduBrain" />
      <div class="logo-text">
        <div class="logo-title">AI EduBrain</div>
        <div class="logo-sub">K12 学段成长智能体</div>
      </div>
      <span class="badge" id="app-version">v0.9.0-demo</span>
    </div>

    <nav class="nav-menu">
      <div class="nav-item active" onclick="switchView('home', this)">
        <span class="nav-icon">🏠</span> 首页入口
      </div>

      <div class="nav-item" onclick="switchView('teacher', this)">
        <span class="nav-icon">👩‍🏫</span> 教师工作台
      </div>

      <div class="nav-item" onclick="switchView('student', this)">
        <span class="nav-icon">🎓</span> 学习伴侣
      </div>

      <div class="nav-item" onclick="switchView('gov', this)">
        <span class="nav-icon">🌍</span> 治理驾驶舱
      </div>
    </nav>

    <div class="user-profile">
      <div class="avatar">李</div>
      <div class="user-info">
        <div class="user-name">李老师</div>
        <div class="user-sub">数学组 · 初二</div>
      </div>
    </div>
  </aside>

  <!-- ===== Main ===== -->
  <main class="main-content">
    <header class="top-header" id="top-header">
      <div class="breadcrumb">
        工作区 /
        <span id="page-title" class="page-title">首页入口</span>
      </div>

      <div class="sys-status">
        <span class="dot"></span>
        系统正常
      </div>
    </header>

    <section class="view-wrapper">

      <!-- ===== Home ===== -->
      <div id="view-home" class="view-container active">
        <div class="home-hero">
          <h1>今天想做点什么？</h1>
          <p>全链路教育大模型已就绪</p>

          <input
            type="text"
            class="magic-input"
            placeholder="输入：'帮我备课' 或 '批改作业'"
            onkeypress="if(event.key==='Enter') startScenario('prep')"
          />

          <div class="card-grid">
            <div class="feature-card" onclick="startScenario('prep')">
              <div class="feature-icon">📘</div>
              <h3>智能备课</h3>
              <p>生成可视化教案</p>
            </div>

            <div class="feature-card" onclick="startScenario('mark')">
              <div class="feature-icon">✍️</div>
              <h3>作业批改</h3>
              <p>OCR 扫描诊断</p>
            </div>

            <div class="feature-card" onclick="switchView('student', document.querySelectorAll('.nav-item')[2])">
              <div class="feature-icon">🎧</div>
              <h3>学习伴侣</h3>
              <p>成长档案 + 自主学习问答</p>
            </div>
          </div>
        </div>
      </div>

      <!-- ===== Teacher ===== -->
      <div id="view-teacher" class="view-container">
        <div class="teacher-toolbar">
          <button id="btn-prep" class="btn btn-primary" onclick="setTeacherMode('prep')">📚 备课模式</button>
          <button id="btn-mark" class="btn btn-ghost" onclick="setTeacherMode('mark')">✍️ 批改模式</button>
        </div>

        <div class="teacher-shell">
          <!-- Left: chat panel -->
          <div class="panel">
            <div class="panel-title">AI 教学助手</div>

            <div class="chat-history" id="chat-box">
              <div class="msg ai">
                <div class="msg-bubble">李老师好！我是您的智能备课助理。</div>
              </div>
            </div>

            <div class="chat-input-wrap">
              <input
                type="text"
                id="teacher-input"
                class="chat-input"
                placeholder="输入指令..."
                onkeypress="if(event.key==='Enter') triggerMsg()"
              />
            </div>
          </div>

          <!-- Right: workspace -->
          <div class="teacher-main">
            <div class="section-title">📌 教学工作区</div>
            <div class="section-body">

              <!-- placeholder -->
              <div id="prep-placeholder" class="center-placeholder">
                <div class="placeholder-icon">✨</div>
                <div class="placeholder-title">AI 魔法准备中</div>
                <div class="placeholder-sub">选择左侧模式并输入指令开始</div>
              </div>

              <!-- lesson -->
              <div id="lesson-result" style="display:none;"></div>

              <!-- OCR -->
              <div
                id="ocr-interface"
                class="ocr-interface"
                style="display:none;"
                onclick="runOCR(this)"
              >
                <div id="ocr-tip" class="ocr-tip">📸 点击屏幕模拟扫描</div>

                <div class="ocr-stage">
                  <div class="paper-mock">
                    <h3 style="text-align:center; margin-top:0;">数学单元测试</h3>
                    <p style="font-family:monospace; font-size:12px; color:#333; line-height:2;">
                      1. 1/2 + 1/3 = 5/6 (✓)<br>
                      2. 甲是乙的 3/4...<br>
                      &nbsp;&nbsp;20 ÷ 3/4 = 80/3 (✗)
                    </p>
                    <div class="error-spot" style="top:125px; left:80px"></div>
                  </div>
                </div>

                <div class="scan-laser"></div>
              </div>

              <!-- quick stats to avoid blank feel -->
              <div class="teacher-kpi-row">
                <div class="kpi-card">
                  <div class="kpi-title">今日批改</div>
                  <div class="kpi-value">18</div>
                  <div class="kpi-sub">已完成 / 共 32</div>
                </div>

                <div class="kpi-card">
                  <div class="kpi-title">近7天掌握度</div>
                  <div class="kpi-value">73%</div>
                  <div class="kpi-sub">较上周 +2%</div>
                </div>

                <div class="kpi-card">
                  <div class="kpi-title">异常预警</div>
                  <div class="kpi-value">3</div>
                  <div class="kpi-sub">可点击钻取详情</div>
                </div>
              </div>

            </div>
          </div>

        </div>
      </div>

      <!-- ===== Student ===== -->
      <div id="view-student" class="view-container">
        <div class="student-header">
          <h1>👋 早上好，小明</h1>
          <span class="student-streak">🔥 打卡 12 天</span>
        </div>

        <div class="student-grid">
          <div class="task-card task-primary" onclick="openVoiceModal()">
            <div class="task-float-icon">🎙️</div>
            <h2>Unit 3 课文跟读</h2>
            <p>预计用时 5 分钟</p>
            <button class="btn btn-light">开始挑战</button>
          </div>

          <div class="task-card">
            <span class="tag tag-danger">错题巩固</span>
            <h3>分数乘除法</h3>
            <p>3 道变式题待完成</p>
          </div>
        </div>

        <!-- voice modal -->
        <div class="voice-modal" id="voice-modal">
          <h2 style="margin-bottom:10px;">正在跟读...</h2>
          <div class="wave-wrap">
            <div class="wave-bar" style="animation-delay:0s"></div>
            <div class="wave-bar" style="animation-delay:0.1s"></div>
            <div class="wave-bar" style="animation-delay:0.2s"></div>
            <div class="wave-bar" style="animation-delay:0.3s"></div>
            <div class="wave-bar" style="animation-delay:0.4s"></div>
          </div>
          <div class="quote">"Actions speak louder than words."</div>
          <button class="btn btn-primary" onclick="closeVoiceModal()">完成录音</button>
        </div>
      </div>

      <!-- ===== Gov ===== -->
      <div id="view-gov" class="view-container gov-container">
        <div class="gov-overlay">
          <h2>🏙️ 区域教育大脑</h2>
          <div style="text-align:right;">
            <div style="color:#38bdf8; font-weight:900; font-size:20px;">92.4%</div>
            <div style="font-size:12px; opacity:0.7;">AI 备课覆盖率</div>
          </div>
        </div>

        <div class="live-feed">
          <div class="feed-title">⚡️ 实时动态</div>
          <div id="feed-list"></div>
        </div>

        <div class="map-stage">
          <div class="map-grid" id="map-grid"></div>
        </div>
      </div>

    </section>
  </main>
</body>
</html>
