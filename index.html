<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI EduBrain | K12 教育智能体演示（PC）</title>
  <link rel="stylesheet" href="./assets/app.css" />
</head>
<body>
  <div class="app">

    <!-- Sidebar (PC only) -->
    <aside id="sidebar" class="sidebar">
      <div class="sidebar-head">
        <div class="brand">
          <div class="brand-logo" aria-hidden="true">🤖</div>
          <div class="brand-meta">
            <div class="brand-title">AI EduBrain</div>
            <div class="brand-sub">K12 教育智能体演示</div>
          </div>
        </div>
        <div class="brand-badges">
          <span id="versionPill" class="pill pill-primary">v1.4.0-pc</span>
        </div>
      </div>

      <!-- Primary nav (always visible) -->
      <nav class="nav">
        <div class="nav-section-title">AI智能门户</div>
        <button class="nav-item" data-view="portal">
          <span class="nav-ico">🏫</span><span class="nav-text">AI智能门户</span>
        </button>
        <button class="nav-item" data-view="agents">
          <span class="nav-ico">🤖</span><span class="nav-text">智能体中心</span>
        </button>

        <div class="nav-divider"></div>

        <!-- Role gate -->
        <div class="role-box">
          <div class="role-row">
            <div class="role-label">当前身份</div>
            <div id="rolePill" class="pill pill-muted">未选择</div>
          </div>
          <div class="role-actions">
            <button id="btnPickRole" class="btn btn-ghost">选择身份</button>
            <button id="btnSwitchRole" class="btn btn-ghost">切换身份</button>
          </div>
        </div>

        <!-- Secondary nav (only after role selected) -->
        <div id="roleNavWrap" class="role-nav-wrap hidden">
          <div class="nav-section-title">工作区</div>
          <div id="roleNav"></div>
        </div>
      </nav>

      <!-- Footer user card -->
      <div class="sidebar-foot">
        <div class="user-card">
          <div class="user-avatar" aria-hidden="true">李</div>
          <div class="user-meta">
            <div class="user-name" id="userName">访问者</div>
            <div class="user-desc" id="userDesc">请选择身份进入演示</div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <header class="topbar">
        <div class="topbar-left">
          <button id="btnCollapse" class="icon-btn" title="收起/展开侧边栏">☰</button>
          <div class="crumb">
            <span id="crumbMain">工作区</span>
            <span class="crumb-sep">/</span>
            <span id="crumbSub">AI智能门户</span>
          </div>
        </div>
        <div class="topbar-right">
          <span class="pill pill-success">● 系统正常</span>
        </div>
      </header>

      <section class="content">

        <!-- VIEW: Portal -->
        <div id="view-portal" class="view active">
          <div class="hero hero-bg">
            <div class="hero-left">
              <div class="hero-tag pill pill-muted">结构化服务入口 + 数字人咨询（演示）</div>
              <h1 class="hero-title">让家校协同与校务服务“找得到、问得清、办得成”</h1>
              <p class="hero-desc">
                以学校私有知识库为底座，面向教师/学生/班主任/家长/教育管理者提供统一入口、智能问答与流程指引，
                并与教学、教研与治理智能体联动。
              </p>

              <div class="hero-cta">
                <button id="btnEnterWithRole" class="btn btn-primary">进入演示系统（选择身份）</button>
                <button class="btn btn-secondary" data-view="agents">浏览智能体中心</button>
              </div>

              <div class="cards-row">
                <div class="mini-card">
                  <div class="mini-title">校园动态</div>
                  <div class="mini-desc">通知公告 · 活动报名 · 校园要闻</div>
                </div>
                <div class="mini-card">
                  <div class="mini-title">办事指南</div>
                  <div class="mini-desc">入学报名 · 课后服务 · 校服研学</div>
                </div>
                <div class="mini-card">
                  <div class="mini-title">家校沟通</div>
                  <div class="mini-desc">班级通知 · 家长会 · 学情解读</div>
                </div>
              </div>

              <div class="today-list card">
                <div class="card-hd">
                  <div class="card-title">今日推荐</div>
                  <div class="card-sub">高频事项的结构化入口（演示）</div>
                </div>
                <div class="card-bd list">
                  <button class="list-item">本周家长会：周五 19:30 线上会议（点击查看入口与注意事项）</button>
                  <button class="list-item">课后服务选课：开放时间 09:00–18:00（点击查看操作步骤）</button>
                  <button class="list-item">寒假研学：报名截止 1 月 28 日（点击查看行程与缴费）</button>
                </div>
              </div>
            </div>

            <div class="hero-right">
              <div class="assistant card">
                <div class="assistant-hd">
                  <div class="assistant-title">学校数字人 · 智能咨询</div>
                  <div class="assistant-sub">支持办事指南 / 校园动态 / 家校问题</div>
                </div>
                <div class="assistant-chat">
                  <div class="chat-bubble bot">你好，我是学校智能助手。你可以问我：课后服务怎么选？入学报名要什么材料？</div>
                </div>
                <div class="assistant-quick">
                  <button class="chip">课后服务怎么选？</button>
                  <button class="chip">入学报名材料</button>
                  <button class="chip">家长会入口</button>
                  <button class="chip">校服订购</button>
                </div>
                <div class="assistant-input">
                  <input class="input" placeholder="输入问题…（演示）" />
                  <button class="btn btn-primary">发送</button>
                </div>
                <div class="assistant-foot">
                  示例：从“家校沟通”一键跳转到班主任“通知/评语”智能体批量生成。
                  <button class="btn btn-ghost" id="btnOpenHomeroom">打开班主任工作台</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- VIEW: Agents -->
        <div id="view-agents" class="view">
          <div class="page">
            <div class="page-hd">
              <h2 class="page-title">智能体中心</h2>
              <div class="page-sub">按场景复用：助教 / 助育 / 助评 / 助学 / 治理 / 平台能力 / 知识库 / 合规</div>
            </div>

            <div class="filters">
              <button class="chip chip-on" data-filter="all">全部</button>
              <button class="chip" data-filter="assist-teach">助教</button>
              <button class="chip" data-filter="assist-parent">助育</button>
              <button class="chip" data-filter="assist-eval">助评</button>
              <button class="chip" data-filter="assist-learn">助学</button>
              <button class="chip" data-filter="govern">治理</button>
              <button class="chip" data-filter="kb">知识库</button>
              <button class="chip" data-filter="compliance">合规</button>
            </div>

            <div class="grid">
              <div class="agent-card" data-tags="assist-teach">
                <div class="agent-title">小学数学教学设计智能体</div>
                <div class="agent-tag">助教</div>
                <div class="agent-desc">按教材/课时生成教学设计，并做课标对齐与要点检查（演示）。</div>
                <div class="agent-actions">
                  <button class="btn btn-secondary" data-open="teacher">打开</button>
                </div>
              </div>

              <div class="agent-card" data-tags="assist-eval">
                <div class="agent-title">班主任评语智能体</div>
                <div class="agent-tag">助评</div>
                <div class="agent-desc">按学情与性格特征生成“先褒后提”的个性化评语（演示）。</div>
                <div class="agent-actions">
                  <button class="btn btn-secondary" data-open="homeroom">打开</button>
                </div>
              </div>

              <div class="agent-card" data-tags="assist-teach">
                <div class="agent-title">高中数学教学助手</div>
                <div class="agent-tag">工作台式</div>
                <div class="agent-desc">模板驱动：备课/课件/资源检索，多入口低学习成本（演示）。</div>
                <div class="agent-actions">
                  <button class="btn btn-secondary" data-open="teacher">打开</button>
                </div>
              </div>

              <div class="agent-card" data-tags="assist-learn">
                <div class="agent-title">学生学习学伴</div>
                <div class="agent-tag">助学</div>
                <div class="agent-desc">即时答疑、错题举一反三、薄弱点专项提升（演示）。</div>
                <div class="agent-actions">
                  <button class="btn btn-secondary" data-open="student">打开</button>
                </div>
              </div>

              <div class="agent-card" data-tags="govern">
                <div class="agent-title">区域治理驾驶舱</div>
                <div class="agent-tag">治理</div>
                <div class="agent-desc">趋势 + 风险 + 行为流的可视化总览与下钻（演示）。</div>
                <div class="agent-actions">
                  <button class="btn btn-secondary" data-open="admin">打开</button>
                </div>
              </div>

              <div class="agent-card" data-tags="kb">
                <div class="agent-title">学校私有知识库管理</div>
                <div class="agent-tag">知识库</div>
                <div class="agent-desc">知识条目、审核发布、命中统计（演示）。</div>
                <div class="agent-actions">
                  <button class="btn btn-secondary" data-open="kb">打开</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- VIEW: Teacher -->
        <div id="view-teacher" class="view">
          <div class="page">
            <div class="page-hd">
              <h2 class="page-title">教师工作台</h2>
              <div class="page-sub">备课 · 批改 · 分析联动 · 教研协同 · 职称成长（演示）</div>
            </div>

            <div class="toolbar teacher-toolbar">
              <button class="tab tab-on" data-tab="prep">📘 备课</button>
              <button class="tab" data-tab="mark">📝 批改</button>
              <button class="tab" data-tab="analysis">📊 分析联动</button>
              <button class="tab" data-tab="research">🧪 教研协同</button>
              <button class="tab" data-tab="growth">🏅 职称成长</button>
              <div class="toolbar-hint">提示：趋势点位 / 分层卡片 / 异常列表均可联动钻取</div>
            </div>

            <div class="split">
              <div class="panel card">
                <div class="card-hd">
                  <div class="card-title">任务列表</div>
                  <div class="card-sub">按 tab 切换展示（演示）</div>
                </div>
                <div class="card-bd list" id="teacherTaskList"></div>
              </div>

              <div class="panel card">
                <div class="card-hd">
                  <div class="card-title" id="teacherDetailTitle">详情</div>
                  <div class="card-sub" id="teacherDetailSub">选择左侧任务查看</div>
                </div>
                <div class="card-bd" id="teacherDetailBody">
                  <div class="empty">请选择任务进行演示。</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- VIEW: Student -->
        <div id="view-student" class="view">
          <div class="page">
            <div class="page-hd">
              <h2 class="page-title">学生学习中心</h2>
              <div class="page-sub">即时答疑 · 错题巩固 · 个性化提升（演示）</div>
            </div>

            <div class="split">
              <div class="panel card">
                <div class="card-hd">
                  <div class="card-title">学习任务</div>
                  <div class="card-sub">智能推荐 + 自主选择</div>
                </div>
                <div class="card-bd list">
                  <button class="list-item">数学：函数图像薄弱点专项（10 分钟）</button>
                  <button class="list-item">英语：阅读理解错题举一反三（8 题）</button>
                  <button class="list-item">语文：作文结构优化（段落训练）</button>
                </div>
              </div>

              <div class="panel card">
                <div class="card-hd">
                  <div class="card-title">AI 学伴</div>
                  <div class="card-sub">引导式追问与讲解（演示）</div>
                </div>
                <div class="card-bd">
                  <div class="chat-bubble bot">把你卡住的步骤发我，我先帮你定位“错在第几步”。</div>
                  <div class="chat-bubble user">我不会求这个函数的单调区间。</div>
                  <div class="chat-bubble bot">先告诉我：你会求导吗？如果会，我们从导数符号表开始。</div>
                  <div class="form-row">
                    <input class="input" placeholder="输入问题…（演示）" />
                    <button class="btn btn-primary">发送</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- VIEW: Homeroom -->
        <div id="view-homeroom" class="view">
          <div class="page">
            <div class="page-hd">
              <h2 class="page-title">班主任工作台</h2>
              <div class="page-sub">通知 · 评语 · 家校沟通 · 异常预警（演示）</div>
            </div>

            <div class="split">
              <div class="panel card">
                <div class="card-hd">
                  <div class="card-title">高频工作</div>
                  <div class="card-sub">结构化入口 + 一键生成</div>
                </div>
                <div class="card-bd list">
                  <button class="list-item">班级通知：家长会提醒（模板）</button>
                  <button class="list-item">学生评语：期末评语批量生成</button>
                  <button class="list-item">异常预警：缺勤/作业未交提醒</button>
                </div>
              </div>

              <div class="panel card">
                <div class="card-hd">
                  <div class="card-title">评语智能体（演示）</div>
                  <div class="card-sub">输入学情与性格特征，生成“先褒后提”评语</div>
                </div>
                <div class="card-bd">
                  <textarea class="textarea" rows="7" placeholder="示例：初三 1 班李小明，期末 A+，班排第 2，上升 2 位，表达能力强，但易粗心…"></textarea>
                  <div class="form-row">
                    <button class="btn btn-secondary">生成示例</button>
                    <button class="btn btn-primary">一键生成</button>
                  </div>
                  <div class="note">演示：输出可复制，可按学生列表批量生成。</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- VIEW: Parent -->
        <div id="view-parent" class="view">
          <div class="page">
            <div class="page-hd">
              <h2 class="page-title">家长家校协同</h2>
              <div class="page-sub">通知公告 · 校务办理 · 学情解读 · 课后服务（演示）</div>
            </div>

            <div class="split">
              <div class="panel card">
                <div class="card-hd">
                  <div class="card-title">我的事项</div>
                  <div class="card-sub">一键直达高频办事</div>
                </div>
                <div class="card-bd list">
                  <button class="list-item">课后服务：查看可选课程与时间</button>
                  <button class="list-item">家长会：进入会议与注意事项</button>
                  <button class="list-item">学情解读：本周学习建议（摘要）</button>
                </div>
              </div>

              <div class="panel card">
                <div class="card-hd">
                  <div class="card-title">家长问答助手</div>
                  <div class="card-sub">围绕校务流程与学情解释（演示）</div>
                </div>
                <div class="card-bd">
                  <div class="chat-bubble bot">你可以问：课后服务怎么选？孩子数学薄弱点怎么补？</div>
                  <div class="form-row">
                    <input class="input" placeholder="输入问题…（演示）" />
                    <button class="btn btn-primary">发送</button>
                  </div>
                  <div class="chips">
                    <button class="chip">课后服务怎么选</button>
                    <button class="chip">作业没完成怎么办</button>
                    <button class="chip">成绩波动原因</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- VIEW: Admin Dashboard -->
        <div id="view-admin" class="view">
          <div class="page">
            <div class="page-hd">
              <h2 class="page-title">治理驾驶舱</h2>
              <div class="page-sub">区域趋势 · 风险预警 · 实时行为流（清晰交互演示）</div>
            </div>

            <div class="dash">
              <div class="kpi-row">
                <div class="kpi card">
                  <div class="kpi-label">本周 AI 使用学校</div>
                  <div class="kpi-value" id="kpiSchools">—</div>
                  <div class="kpi-sub">较上周 <span id="kpiSchoolsDelta">—</span></div>
                </div>
                <div class="kpi card">
                  <div class="kpi-label">教师备课提效</div>
                  <div class="kpi-value" id="kpiEff">—</div>
                  <div class="kpi-sub">平均节省 <span id="kpiEffSub">—</span></div>
                </div>
                <div class="kpi card">
                  <div class="kpi-label">风险预警（需关注）</div>
                  <div class="kpi-value" id="kpiRisk">—</div>
                  <div class="kpi-sub">异常作业/出勤/舆情</div>
                </div>
              </div>

              <div class="dash-main">
                <div class="card">
                  <div class="card-hd dash-hd">
                    <div>
                      <div class="card-title">趋势总览</div>
                      <div class="card-sub">点击时间范围切换数据（SVG 动画）</div>
                    </div>
                    <div class="seg">
                      <button class="seg-btn seg-on" data-range="7d">近 7 天</button>
                      <button class="seg-btn" data-range="30d">近 30 天</button>
                      <button class="seg-btn" data-range="term">本学期</button>
                    </div>
                  </div>
                  <div class="card-bd">
                    <svg id="trendSvg" class="trend" viewBox="0 0 700 240" preserveAspectRatio="none">
                      <path id="trendGrid" d="M0 40 H700 M0 80 H700 M0 120 H700 M0 160 H700 M0 200 H700" class="trend-grid"></path>
                      <path id="trendPath" d="" class="trend-line"></path>
                      <circle id="trendDot" r="5" cx="0" cy="0" class="trend-dot"></circle>
                    </svg>
                    <div class="trend-legend">
                      <span class="legend-item"><i class="legend-dot"></i> AI 会话量</span>
                      <span class="legend-item"><i class="legend-dot"></i> 教学工具调用</span>
                      <span class="legend-item"><i class="legend-dot"></i> 治理钻取次数</span>
                    </div>
                  </div>
                </div>

                <div class="card">
                  <div class="card-hd">
                    <div class="card-title">实时行为流</div>
                    <div class="card-sub">清晰列表 + 轻量滚动（演示）</div>
                  </div>
                  <div class="card-bd list" id="activityFeed"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- VIEW: Knowledge Base -->
        <div id="view-kb" class="view">
          <div class="page">
            <div class="page-hd">
              <h2 class="page-title">学校私有知识库管理</h2>
              <div class="page-sub">条目编写 · 审核发布 · 命中统计（演示）</div>
            </div>

            <div class="kb">
              <div class="kb-left card">
                <div class="card-hd">
                  <div class="card-title">条目编辑</div>
                  <div class="card-sub">结构化字段（演示）</div>
                </div>
                <div class="card-bd">
                  <div class="form">
                    <div class="form-row">
                      <label class="label">标题</label>
                      <input class="input" value="课后服务选课指南" />
                    </div>
                    <div class="form-row">
                      <label class="label">分类</label>
                      <select class="select">
                        <option>办事指南</option>
                        <option>通知公告</option>
                        <option>制度规范</option>
                      </select>
                    </div>
                    <div class="form-row">
                      <label class="label">正文</label>
                      <textarea class="textarea" rows="8">包含流程、材料、时间、联系方式…（演示）</textarea>
                    </div>
                    <div class="form-actions">
                      <button class="btn btn-secondary">保存草稿</button>
                      <button class="btn btn-primary">提交审核</button>
                    </div>
                    <div class="note">演示：命中统计/版本管理/敏感信息脱敏可在二期平台能力层实现。</div>
                  </div>
                </div>
              </div>

              <div class="kb-right card">
                <div class="card-hd">
                  <div class="card-title">条目列表</div>
                  <div class="card-sub">点击切换编辑（演示）</div>
                </div>
                <div class="card-bd">
                  <div class="kb-list">
                    <div class="kb-item">
                      <div class="kb-title">本周家长会参会入口与注意事项</div>
                      <div class="kb-meta">通知公告 · 更新：2026-01-18 · 命中：31</div>
                      <span class="pill pill-success">已发布</span>
                    </div>
                    <div class="kb-item">
                      <div class="kb-title">课后服务选课指南</div>
                      <div class="kb-meta">办事指南 · 更新：2026-01-15 · 命中：42</div>
                      <span class="pill pill-success">已发布</span>
                    </div>
                    <div class="kb-item">
                      <div class="kb-title">学生请假与到校管理规范</div>
                      <div class="kb-meta">制度规范 · 更新：2026-01-10 · 命中：18</div>
                      <span class="pill pill-muted">草稿</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </section>
    </main>
  </div>

  <!-- Role Modal -->
  <div id="roleModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-mask"></div>
    <div class="modal-card">
      <div class="modal-hd">
        <div>
          <div class="modal-title">选择身份进入演示</div>
          <div class="modal-sub">未选择身份也可先浏览“AI智能门户 / 智能体中心”。</div>
        </div>
        <button id="btnCloseRoleModal" class="icon-btn" title="关闭">✕</button>
      </div>
      <div class="modal-bd role-grid">
        <button class="role-card" data-role="teacher"><span class="role-ico">👩‍🏫</span><span class="role-name">教师</span><span class="role-desc">备课/批改/教研/成长</span></button>
        <button class="role-card" data-role="student"><span class="role-ico">🧑‍🎓</span><span class="role-name">学生</span><span class="role-desc">学伴/错题/提升</span></button>
        <button class="role-card" data-role="homeroom"><span class="role-ico">🧑‍💼</span><span class="role-name">班主任</span><span class="role-desc">通知/评语/家校</span></button>
        <button class="role-card" data-role="admin"><span class="role-ico">🏛️</span><span class="role-name">教育管理者</span><span class="role-desc">趋势/风险/督导</span></button>
        <button class="role-card" data-role="parent"><span class="role-ico">👨‍👩‍👧</span><span class="role-name">家长</span><span class="role-desc">家校/校务/解读</span></button>
      </div>
      <div class="modal-ft">
        <button id="btnClearRole" class="btn btn-ghost">清除身份</button>
        <button id="btnGoPortal" class="btn btn-secondary">先看 AI智能门户</button>
      </div>
    </div>
  </div>

  <script src="./assets/app.js"></script>
</body>
</html>
